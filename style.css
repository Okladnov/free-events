/* ===================================================================
   STYLE.CSS - ФИНАЛЬНАЯ ВЕРСИЯ С GRID-ШАПКОЙ И ВСЕМИ ФИКСАМИ
   =================================================================== */

/* ====================
   1. БАЗА И ВСЕ ПЕРЕМЕННЫЕ
   ==================== */
:root {
  /* --- Цвета --- */
  --primary-color: #ff6a00;
  --primary-color-light: rgba(255, 106, 0, 0.1);
  --background-color: #f4f5f7;
  --card-background: #ffffff;
  --input-background: #f0f2f5;
  --border-color: #e0e0e0;
  --tag-background: #eee;
  
  --text-color-main: #333;
  --text-color-secondary: #666;
  --text-color-subtle: #888;

  --success-color: #2ecc71;
  --error-color: #e74c3c;
  --white-color: #fff;

  /* --- Размеры и отступы --- */
  --border-radius-small: 8px;
  --border-radius-medium: 12px;
  --border-radius-large: 16px;
  --border-radius-round: 50%;
  --header-height: 70px;
  --container-width: 900px;
  --grid-gap: 30px;

  /* --- Шрифты --- */
  --font-family-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-size-small: 13px;
  --font-size-base: 15px;
  --font-size-medium: 18px;
  --font-size-large: 24px;
  
  /* --- Эффекты --- */
  --shadow-main: 0 4px 16px rgba(0,0,0,0.08);
  --shadow-strong: 0 10px 30px rgba(0, 0, 0, 0.1);
  --transition-main: all 0.2s ease-in-out;
  --header-logo-filter: none;
}

body.dark-theme {
  --background-color: #121212;
  --card-background: #1e1e1e;
  --input-background: #2c2c2c;
  --border-color: #333;
  --tag-background: #333;
  
  --text-color-main: #e0e0e0;
  --text-color-secondary: #ccc;
  --text-color-subtle: #aaa;
  
  --shadow-main: 0 4px 16px rgba(0,0,0,0.2);
  --shadow-strong: 0 10px 30px rgba(0, 0, 0, 0.3);
  --header-logo-filter: invert(1) brightness(1.5);
}

/* ====================
   2. ОБЩИЕ СТИЛИ
   ==================== */
body { margin: 0; font-family: var(--font-family-main); background-color: var(--background-color); color: var(--text-color-main); transition: background-color 0.3s, color 0.3s; }
.container { max-width: var(--container-width); margin: 0 auto; padding: 20px; }
.card { background-color: var(--card-background); padding: 24px; border-radius: var(--border-radius-large); border: 1px solid var(--border-color); }

/* ====================
   3. КОМПОНЕНТЫ (Кнопки, Инпуты)
   ==================== */
.submit-btn { width: 100%; padding: 12px; border-radius: var(--border-radius-small); font-weight: bold; font-size: 16px; cursor: pointer; transition: var(--transition-main); margin-top: 10px; border: none; }
.submit-btn.primary { background-color: var(--primary-color); color: var(--white-color); }
.submit-btn.primary:hover { opacity: 0.9; }
.submit-btn.secondary { background-color: transparent; color: var(--primary-color); border: 1px solid var(--primary-color); }
.submit-btn.secondary:hover { background-color: var(--primary-color-light); }
.submit-btn.danger { background-color: var(--error-color); color: var(--white-color); }

.input-group { margin-bottom: 24px; }
.input-group label { display: block; font-size: 14px; margin-bottom: var(--border-radius-small); font-weight: 500; }
.input-group input, .input-group select, .input-group textarea { width: 100%; padding: 12px 14px; border: 1px solid var(--border-color); border-radius: var(--border-radius-small); background-color: var(--input-background); color: var(--text-color-main); font-size: var(--font-size-base); box-sizing: border-box; }
.input-group input:focus, .input-group select:focus, .input-group textarea:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px var(--primary-color-light); }

.form-message { font-size: 14px; margin-top: 15px; }

/* ====================
   4. ШАПКА (ИСПРАВЛЕНО НА GRID)
   ==================== */
.header { background-color: var(--card-background); padding: 15px 20px; border-bottom: 1px solid var(--border-color); transition: background-color 0.3s, border-color 0.3s; }
.header-container {
    display: grid;
    grid-template-columns: auto 1fr auto; /* Лого | Поиск | Кнопки */
    align-items: center;
    gap: 20px;
    width: 100%;
    max-width: 1200px; /* Можно сделать шапку чуть шире для больших экранов */
    margin: 0 auto;
}
.header-logo { height: 40px; display: block; filter: var(--header-logo-filter); transition: filter 0.3s; }

.search-wrapper { position: relative; display: flex; align-items: center; } /* Убрали flex-grow */
.search-wrapper input { width: 100%; height: 40px; padding: 5px 45px 5px 20px; font-size: var(--font-size-base); border: none; border-radius: 20px; background-color: var(--input-background); color: var(--text-color-main); -webkit-appearance: none; transition: background-color 0.3s; }
.search-wrapper input:focus { outline: none; }
.search-button { position: absolute; right: 3px; top: 3px; bottom: 3px; width: 34px; border: none; background: transparent; cursor: pointer; display: flex; align-items: center; justify-content: center; border-radius: var(--border-radius-round); }
.search-button svg path { stroke: var(--text-color-secondary); }

.header-right-side { display: flex; align-items: center; gap: 20px; }
.auth-block { display: flex; align-items: center; gap: 15px; } /* Убрали margin-left: auto */
.add-event-btn { background-color: var(--primary-color); color: var(--white-color); padding: 0 16px; height: 40px; border: none; border-radius: var(--border-radius-small); font-weight: bold; cursor: pointer; transition: background-color 0.2s; white-space: nowrap; }

.profile-dropdown { position: relative; }
.profile-trigger { display: flex; align-items: center; gap: var(--border-radius-small); background-color: var(--input-background); border: none; padding: 0 16px; height: 40px; border-radius: 20px; cursor: pointer; font-weight: bold; color: var(--text-color-main); transition: background-color 0.3s; }
.profile-menu { display: none; position: absolute; top: calc(100% + 10px); right: 0; background-color: var(--card-background); border-radius: var(--border-radius-small); box-shadow: var(--shadow-strong); padding: var(--border-radius-small); min-width: 220px; z-index: 100; border: 1px solid var(--border-color); }
.profile-menu.active { display: block; }
.profile-menu a { display: block; padding: 10px 12px; color: var(--text-color-main); text-decoration: none; border-radius: 6px; font-size: var(--font-size-base); }
.profile-menu a:hover { background-color: var(--input-background); }
.menu-separator { height: 1px; background-color: var(--border-color); margin: var(--border-radius-small) 0; }

#loginBtn { display: inline-block; background-color: transparent; color: var(--primary-color); padding: 0 16px; height: 40px; line-height: 38px; border: 1px solid var(--primary-color); border-radius: var(--border-radius-small); font-weight: bold; cursor: pointer; transition: var(--transition-main); text-decoration: none; }
#loginBtn:hover { background-color: var(--primary-color); color: var(--white-color); }

.theme-toggle-label { position: relative; display: inline-block; width: 44px; height: 24px; }
.theme-toggle-label input { opacity: 0; width: 0; height: 0; }
.theme-toggle-slider { position: absolute; cursor: pointer; inset: 0; background-color: #ccc; transition: .4s; border-radius: 24px; }
.theme-toggle-slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: var(--border-radius-round); }
input:checked + .theme-toggle-slider { background-color: var(--primary-color); }
input:checked + .theme-toggle-slider:before { transform: translateX(20px); }


/* ====================
   5. ОСНОВНЫЕ СТРАНИЦЫ (Главная, Логин и т.д.)
   ==================== */
.filters-section { padding: 20px 0 15px 0; margin: 0 20px 20px 20px; border-bottom: 1px solid var(--border-color); }
.pills-container { display: flex; overflow-x: auto; gap: 10px; padding-bottom: 5px; scrollbar-width: none; }
.pills-container::-webkit-scrollbar { display: none; }
.category-pill { flex-shrink: 0; padding: 8px 16px; font-size: 14px; font-weight: 600; color: var(--text-color-main); background-color: var(--input-background); border: 1px solid var(--input-background); border-radius: 18px; cursor: pointer; transition: var(--transition-main); }
.category-pill.active { background-color: var(--primary-color); color: var(--white-color); border-color: var(--primary-color); }

#events { display: flex; flex-direction: column; gap: 16px; }
.event-card-v3 { display: flex; flex-direction: column; background-color: var(--card-background); border: 1px solid var(--border-color); border-radius: var(--border-radius-medium); padding: var(--border-radius-medium); transition: box-shadow 0.2s; }
.event-card-v3:hover { box-shadow: var(--shadow-main); }
.card-header { display: flex; justify-content: space-between; align-items: center; font-size: var(--font-size-small); color: var(--text-color-subtle); margin-bottom: var(--border-radius-medium); padding: 0 4px; }
.card-category { font-weight: bold; }
.card-body { display: flex; gap: 16px; margin-bottom: var(--border-radius-medium); }
.card-image-link { display: block; width: 120px; height: 120px; flex-shrink: 0; border-radius: var(--border-radius-small); overflow: hidden; background-color: var(--input-background); }
.card-image-link img { width: 100%; height: 100%; object-fit: cover; }
.card-content { display: flex; flex-direction: column; flex-grow: 1; min-width: 0; }
.card-title-link { text-decoration: none; color: var(--text-color-main); }
.card-title-link h3 { margin: 0 0 8px; font-size: var(--font-size-medium); font-weight: 600; line-height: 1.4; }
.card-author { display: flex; align-items: center; gap: var(--border-radius-small); margin-top: auto; font-size: var(--font-size-small); color: var(--text-color-subtle); }
.card-author img { width: 24px; height: 24px; border-radius: var(--border-radius-round); object-fit: cover; }
.card-footer { display: flex; justify-content: space-between; align-items: center; border-top: 1px solid var(--border-color); padding-top: var(--border-radius-medium); }
.card-actions { display: flex; align-items: center; gap: 16px; }
.action-btn { display: flex; align-items: center; gap: var(--border-radius-small); background: none; border: none; cursor: pointer; font-size: 14px; color: var(--text-color-subtle); padding: 4px; }
.action-btn svg { width: 20px; height: 20px; fill: var(--text-color-subtle); transition: fill 0.2s, transform 0.2s; }
.action-btn:hover svg { fill: var(--primary-color); }
.action-btn.active svg { fill: var(--error-color); transform: scale(1.1); }
.card-main-link { background-color: var(--primary-color); color: var(--white-color); text-decoration: none; padding: 8px 16px; border-radius: var(--border-radius-small); font-size: 14px; font-weight: bold; transition: background-color 0.2s; }
#pagination-controls { text-align: center; margin-top: 30px; }
.footer { text-align: center; padding: 30px 20px; font-size: 14px; color: var(--text-color-subtle); }

.login-container-normal { max-width: 450px; margin: 40px auto; padding: 32px; background-color: var(--card-background); border: 1px solid var(--border-color); border-radius: var(--border-radius-large); }
.auth-form h2 { text-align: center; margin-top: 0; }
.auth-form .form-subtitle { text-align: center; margin-top: -10px; margin-bottom: 30px; color: var(--text-color-secondary); }
.toggle-form-text { text-align: center; margin-top: 20px; font-size: 14px; }
.toggle-form-text a { color: var(--primary-color); font-weight: bold; text-decoration: none; }
.toggle-form-text a:hover { text-decoration: underline; }
.google-btn { display: flex; align-items: center; justify-content: center; width: 100%; padding: 10px; background-color: var(--white-color); color: var(--text-color-main); border: 1px solid var(--border-color); border-radius: var(--border-radius-small); font-size: 15px; font-weight: 500; cursor: pointer; transition: background-color 0.2s, box-shadow 0.2s; }
.google-btn:hover { background-color: #f7f7f7; }
body.dark-theme .google-btn { background-color: var(--input-background); border-color: #444; }
.google-btn img { width: 20px; height: 20px; margin-right: 12px; }
.divider { display: flex; align-items: center; text-align: center; color: var(--text-color-subtle); margin: 20px 0; }
.divider::before, .divider::after { content: ''; flex: 1; border-bottom: 1px solid var(--border-color); }
.divider:not(:empty)::before { margin-right: .5em; }
.divider:not(:empty)::after { margin-left: .5em; }


/* ====================
   6. АДАПТИВНОСТЬ
   ==================== */
@media (max-width: 900px) {
  .form-grid-container, .profile-layout-container { grid-template-columns: 1fr; }
  .profile-page-card { position: static; }
}

@media (max-width: 768px) {
    /* На маленьких экранах возвращаемся к flex, чтобы переносить элементы */
    .header-container { display: flex; flex-wrap: wrap; }
    .search-wrapper { width: 100%; margin-top: 10px; order: 3; }
    .header-right-side { order: 2; margin-left: auto; } /* Сдвигаем вправо */
    .header-title { order: 1; }
}

@media (max-width: 600px) {
  .card-body { flex-direction: column; }
  .card-image-link { width: 100%; height: 180px; }
}

